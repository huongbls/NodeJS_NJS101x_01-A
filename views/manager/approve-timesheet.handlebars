<div class="container">
  <h4>Phê duyệt bảng chấm công</h4>
  {{! <a href="/confirmed-timesheet">Xem chi tiết phê duyệt</a> }}
  <form action="/approve-timesheet-search" method="GET">
    <label for="searchMonth">Chọn tháng</label>
    {{#if searchMonth}}
      <input type="month" name="searchMonth" value="{{searchMonth}}" />
    {{else}}
      <input type="month" name="searchMonth" />
    {{/if}}
    <button type="submit">Tra cứu</button>
  </form>
  <div id="accordion" class="mt-3">
    {{#each member}}
      <div class="card">
        <div class="card-header">
          <a class="card-link" data-toggle="collapse" href="#{{_id}}">
            {{name}}
            -
            {{_id}}
          </a>
        </div>
        <div id="{{_id}}" class="collapse" data-parent="#accordion">
          <div class="card-body">
            <table class="table table-bordered">
              <thead class="thead-light">
                <tr>
                  <th>Ngày</th>
                  <th>Nơi làm</th>
                  <th>Giờ bắt đầu</th>
                  <th>Giờ kết thúc</th>
                  <th>Thời gian làm (hr)</th>
                  <th>Nghỉ phép (hr)</th>
                  <th>Tổng giờ làm (hr)(*)</th>
                  <th>Overtime (hr)</th>
                </tr>
              </thead>
              <tbody>
                {{!-- {{#each staffTimesheet}}
                  {{#if details}}
                        {{#each details}}
                          <tr>
                            {{#ifCond @index '===' 0}}
                            <td rowspan="{{../details.length}}">{{tolocaledatestring ../date}}</td>
                            {{/ifCond}}
                            <td>{{workplace}}</td>
                            <td>{{getHours startTime}}:{{getMinutes startTime}}</td>
                            {{#if endTime}}
                              <td>{{getHours endTime}}:{{getMinutes endTime}}</td>
                              <td>{{subStract endTime startTime}}</td>
                            {{else}}
                              <td>-</td>
                              <td>-</td>
                            {{/if}}
                            {{#ifCond @index '===' 0}} 
                            {{#if ../leaveHour}}
                            <td rowspan="{{../details.length}}">{{../leaveHour}}</td>
                            <td rowspan="{{../details.length}}">{{../totalHour}}</td>
                            {{else}}
                            <td rowspan="{{../details.length}}">-</td>
                            <td rowspan="{{../details.length}}">{{../totalWorkingHour}}</td>
                            {{/if}}
                            <td rowspan="{{../details.length}}">{{../overTime}}</td>
                            {{/ifCond}}
                          </tr>
                        {{/each}}
                      {{else}}
                        {{#if leaveHour}}
                          <tr>
                            <td>{{tolocaledatestring date}}</td>
                            <td>-</td>
                            <td>-</td>
                            <td>-</td>
                            <td>-</td>
                            <td>{{leaveHour}}</td>
                            <td>{{totalHour}}</td>
                            <td>-</td>
                          </tr>
                        {{/if}}
                      {{/if}}
                {{/each}} --}}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    {{/each}}
  </div>
</div>